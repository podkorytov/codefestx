<loader
  [isReady]="isReady">

  <layout
    *ngIf="isReady"
    [title]="'Доклад'"
    [state]="state">

    <div
      actions>

      <popularity-icon
        *ngIf="isAuthorized"
        [popularity]="lecture.favoritesCount">
      </popularity-icon>

      <button
        (click)="onFavoriteClick()">
        В избранное
      </button>
    </div>

    <div
      content
      class="event">

      <tabs
        role="tablist"
        aria-orientation="horizontal">

        <button
          role="tab"
          class="tabs__button tabs__button--active">

          <span
            class="tabs__button-text">
            Инфо
          </span>
        </button>

        <button
          disabled
          role="tab"
          class="tabs__button">

          <span
            class="tabs__button-text">

            Обсуждение&ngsp;

            <span
              class="tabs__button-text-amount">
              (123)
            </span>
          </span>
        </button>
      </tabs>

      <!-- Event -->
      <article
        class="event__article">

        <!-- Meta -->
        <div
          class="event__meta">

          <!-- Location -->
          <span
            class="event__meta-item">
            {{ lecture.location.title }}
          </span>

          <!-- Section -->
          <span
            class="event__meta-item">
            {{ lecture.section.title }}
          </span>
        </div>

        <!-- Title -->
        <h1
          class="event__title">
          {{ lecture.title }}
        </h1>

        <!-- Info -->
        <div
          class="event__info">

          <!-- Speakers -->
          <div
            *ngIf="!lecture.speakers.isEmpty"
            class="event__info-item info-item">

            <!-- Media -->
            <div
              class="info-item__media">

                <span
                  *ngFor="let speaker of lecture.speakers"
                  class="info-item__media-container">

                  <img
                    [src]="speaker.avatarPath"
                    [alt]="speaker.name"
                    class="info-item__media-image">
                </span>
            </div>

            <!-- Details -->
            <div
              class="info-item__details">

              <!-- Title -->
              <div
                class="info-item__title">

                <ng-container
                  *ngFor="let speaker of lecture.speakers">
                  {{ speaker.name }}
                </ng-container>
              </div>

              <!-- Subtitle -->
              <div
                class="info-item__subtitle">

                <ng-container
                  *ngFor="let speaker of lecture.speakers">
                  {{ speaker.company }}
                </ng-container>
              </div>
            </div>
          </div>

          <!-- Time -->
          <div
            class="event__info-item info-item">

            <!-- Media -->
            <div
              class="info-item__media">

                <span
                  class="info-item__media-container info-item__media-container--placeholder">
                </span>
            </div>

            <!-- Details -->
            <div
              class="info-item__details">

              <!-- Title -->
              <div
                class="info-item__title">
                {{ startTime }}
              </div>

              <!-- Subtitle -->
              <div
                class="info-item__subtitle">
                {{ endTime }}
              </div>
            </div>
          </div>
        </div>

        <!-- Description -->
        <div
          [innerHTML]="lecture.description"
          class="event__description">
        </div>
      </article>

      <section
        *ngIf="isLikable"
        class="event__vote">
        <!-- Vote -->
        <h2
          class="event__vote-title">Понравился доклад? Голосуй!</h2>

        <p
          class="event__vote-description">
          Wrike наградит лучшего докладчика
        </p>
        <button
          cf-button
          [disabled]="!lectureStarted"
          (click)="onLikeClick()"
          class="event__vote-button button-full-width"
          [class.button-primary]="!isLiked">
          <ng-container
            *ngIf="!isLiked">

            <svg
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"
              class="button-icon">
              <path d="M15.4 7H20l-7.08 7.06-2.3-2.29L15.41 7zm-6.8 4.04l3.67 3.67L9.97 17 4 11.04h4.6z" fill-rule="evenodd"/>
            </svg>

            Проголосовать
          </ng-container>

          <ng-container
            *ngIf="isLiked">
            <svg
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg" fill="green" width="24" height="24" viewBox="0 0 24 24"
              class="button-icon">
              <path d="M15.4 7H20l-7.08 7.06-2.3-2.29L15.41 7zm-6.8 4.04l3.67 3.67L9.97 17 4 11.04h4.6z" fill-rule="evenodd"/>
            </svg>

            <span aria-hidden="true">Уже проголосовали</span>
            <span class="visually-hidden">Отозвать голос</span>
          </ng-container>
        </button>

        <p
          *ngIf="!lectureStarted"
          class="event__vote-disabled-info">
          Голосование будет доступно через 10 мин после начала доклада для&nbsp;авторизованных пользователей
        </p>
      </section>
    </div>
  </layout>
</loader>
